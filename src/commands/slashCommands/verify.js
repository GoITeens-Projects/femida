const { SlashCommandBuilder } = require("discord.js");
const sendVerification = require("../../interactions/verification/sendVerification");

module.exports = {
  data: new SlashCommandBuilder()
    .setName("verify")
    .setDescription("–í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è —É—á–Ω—ñ–≤ GoIteens")
    .setDMPermission(false),

  async execute(interaction) {
    await interaction.deferReply({
      ephemeral: true,
    });
    try {
      const status = await sendVerification(
        interaction.user,
        false,
        interaction.member.guild,
        true
      );
      if (!status) {
        throw Error("–ù–µ –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –æ—Å–æ–±–∏—Å—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è");
      }
      await interaction.editReply({
        content: "–ü–æ–¥–∏–≤–∏—Å—å —É –æ—Å–æ–±–∏—Å—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—èüòâ",
        ephemeral: true,
      });
    } catch (err) {
      console.log("Verify cmd error - " + err);
      await interaction.editReply({
        content:
          "–í–∏–Ω–∏–∫–ª–∞ –¥–∏–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞. –ü–µ—Ä–µ–≤—ñ—Ä –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ—Å–æ–±–∏—Å—Ç–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å",
        ephemeral: true,
      });
    }
  },
};
